---
title: "Events API"
draft: false
categories:
tags: ["#api",]
author: Lawrence Lane
alwaysopen: false
pre: ""
---

## About the Events API

The Events API can be used to view and delete events generated by policy alerts in CloudWisdom. Responses include details about elements and policies associated to the events found. You can test these endpoints by visiting our [Swagger page](https://app.metricly.com/swagger-ui.html#/elements) and by clicking the interactive buttons below.

## GET from /events

{{< button href="https://app.metricly.com/swagger-ui.html#!/events/getEventsUsingGET_1" theme="info" >}} GET {{< /button >}} Use this endpoint to get details on events and their associated policies/elements.

{{% expand "View Method Details." %}}

### Parameters

{{% notice tip %}}

The following parameters are all optional. Users can interact with the /events endpoint without using these parameters to obtain events which have occurred within the past hour.

{{% /notice %}}

| Parameter | Parameter Type | Data Type | Description |
|-------------|----------------|---------------|---------------------------------------------------------------|
| duration | query | string | Follows ISO8601 duration format. Example options include: PT1h, PT1m, PT10s, P3D |
| startTime | query | date-time | Start time for the query. YYYY-MM-DDT00:001Z format (must include time zone). |
| endTime | query | date-time | End time for the query. YYYY-MM-DDT00:001Z format (must include time zone). |
| category | query | Array[string] | Defines event category; valid inputs are INFO, WARNING, or CRITICAL. |
| elementId | query | Array[string] | Element Ids can be found in by selecting an element in CloudWisdom and viewing the URL (/#/inventory/6bdf4fd1-1111-1111-1c11-17eb5f628e46) |
| elementName | query | Array[string] | Name of element. |
| elementType | query | Array[string] | Type of element; examples include EC2, ALB, SERVER. |
| elementTags | query | string | Tags associated to an element. The format for tags is [{“name”:”key1″, “value”:”value1″}, {“name”:”key2″, “value”:”value2″}, (etc.)] |
| eventTags | query | string | You can tag events to enable filtering in CloudWisdom by passing in keys and values. The format for tags is [{“name”:”key1″, “value”:”value1″}, {“name”:”key2″, “value”:”value2″}, (etc.)] |
| policy | query | Array[string] | Policy Id. |
| isExternal | query | boolean | Defines whether or not the event is external.  |
| title | query | Array[string] | Title of the event |
| type | query | Array[string] | Defines type of event; valid inputs are INFO, WARNING, or CRITICAL. |

### Request URL

`https://app.metricly.com/events`

### CURL

In the following CURL example an **elementId** is provided along with a **startTime** and **endTime** that examines 10 minutes in total.

```
curl -X GET --header 'Accept: application/json' 'https://app.metricly.com/events?startTime=2020-02-08T02%3A05%3A00Z&endTime=2020-02-08T02%3A10%3A00Z&elementId=24660956-1111-392f-adbe-71c85255bd40'

```

### Response Body

The following response body found 2 events with the **category** `INFO`. Both events returned key data about the **policyNames** invoked and the **elementIds** responsible for the triggered the events.
```
{
  "events": [
    {
      "id": "82691285-5254-4830-ba07-34b809cfe25b",
      "timestamp": "2020-02-08T02:05:00Z",
      "category": {
        "id": "1",
        "name": "INFO",
        "color": "#0000FF"
      },
      "data": {
        "metricIds": [
          {
            "fqn": "aws.ec2.cpuutilization",
            "id": "1b350b41-e6a6-3a41-8b0a-b9292553fce7"
          }
        ],
        "policyName": "Test-DY-PolicyCreationTime",
        "metrics": [
          "aws.ec2.cpuutilization"
        ],
        "results": "{\"violating\":true,\"conditions\":[{\"id\":\"0\",\"violating\":true,\"expression\":\"The current value of aws.ec2.cpuutilization is 99.53; this is above the static threshold of 99.\"}],\"metrics\":[\"aws.ec2.cpuutilization\"]}"
      },
      "elementId": "24660956-1111-392f-adbe-71c85255bd40",
      "elementFqn": "511119301106:EC2:us-west-2:i-4b0d3a41",
      "elementType": "EC2",
      "elementName": "example-usw2a (10.10.10.6)",
      "elementLocation": "us-west-2a",
      "elementTags": {
        "app": "vpn",
        "n.analysis.status": "",
        "Tenant": "internal",
        "n.collectors": "EC2",
        "n.backfill.status": "false",
        "Netuitive": "True",
        "Name": "example-usw2a"
      },
      "policy": {
        "id": "fe8bd66b-586f-401e-9982-d898aebda30f",
        "name": "Test-DY-PolicyCreationTime",
        "description": null,
        "scope": null,
        "duration": null,
        "anyCondition": false,
        "conditions": [],
        "eventConditions": [],
        "checkCondition": null,
        "actions": [],
        "enabled": true,
        "deleted": false
      },
      "source": null,
      "title": null,
      "tags": [],
      "type": null,
      "isExternal": false,
      "processedTime": null,
      "eventTags": {}
    },
    {
      "id": "9fddc03c-bbea-4005-b8e5-02ad5ef0dac8",
      "timestamp": "2020-02-08T02:10:00Z",
      "category": {
        "id": "1",
        "name": "INFO",
        "color": "#0000FF"
      },
      "data": {
        "metricIds": [
          {
            "fqn": "aws.ec2.cpuutilization",
            "id": "1b350b41-e6a6-3a41-8b0a-b9292553fce7"
          }
        ],
        "policyName": "Test-DY-PolicyCreationTime",
        "metrics": [
          "aws.ec2.cpuutilization"
        ],
        "results": "{\"violating\":true,\"conditions\":[{\"id\":\"0\",\"violating\":true,\"expression\":\"The current value of aws.ec2.cpuutilization is 99.57; this is above the static threshold of 99.\"}],\"metrics\":[\"aws.ec2.cpuutilization\"]}"
      },
      "elementId": "24660956-1111-392f-adbe-71c85255bd40",
      "elementFqn": "511119301106:EC2:us-west-2:i-4b0d3a41",
      "elementType": "EC2",
      "elementName": "example-usw2a (10.10.10.6)",
      "elementLocation": "us-west-2a",
      "elementTags": {
        "app": "vpn",
        "n.analysis.status": "",
        "Tenant": "internal",
        "n.collectors": "EC2",
        "n.backfill.status": "false",
        "Netuitive": "True",
        "Name": "example-usw2a"
      },
      "policy": {
        "id": "fe8bd66b-586f-401e-9982-d898aebda30f",
        "name": "Test-DY-PolicyCreationTime",
        "description": null,
        "scope": null,
        "duration": null,
        "anyCondition": false,
        "conditions": [],
        "eventConditions": [],
        "checkCondition": null,
        "actions": [],
        "enabled": true,
        "deleted": false
      },
      "source": null,
      "title": null,
      "tags": [],
      "type": null,
      "isExternal": false,
      "processedTime": null,
      "eventTags": {}
    }
  ]
}
```
{{% /expand %}}

---

## DELETE to /events/delete/policy/{policyId}

{{< button href="https://app.metricly.com/swagger-ui.html#!/events/deleteEventsByPolicyUsingDELETE" theme="danger" >}} DELETE {{< /button >}} Use this endpoint to delete events for a specific policy.

{{% expand "View Method Details." %}}

### Parameters

| Parameter | Parameter Type | Data Type | Description |
|--------------------|----------------|-----------|----------------------------------------------|
| policyId | path | string | A policy's unique ID. |


### Request URL

`https://app.metricly.com/events/delete/policy/{policyId}`

### CURL

In the following CURL example, events for a policy with the **policyId** `e321f5fa-a6fb-49d6-b4e6-beb468eb461f` are deleted.

```
curl -X DELETE --header 'Accept: */*' 'https://app.metricly.com/events/delete/policy/e321f5fa-a6fb-49d6-b4e6-beb468eb461f'
```


### Response Body

The following response body has no content. The successful response code is 204.

```
No Content
```

{{% /expand %}}

---

## GET from /events/{eventId}

{{< button href="https://app.metricly.com/swagger-ui.html#!/events/getEventUsingGET" theme="info" >}} GET {{< /button >}} Use this endpoint to obtain details about an event and its associated policy/elements.

{{% expand "View Method Details." %}}

### Parameters

| Parameter | Parameter Type | Data Type | Description |
|--------------------|----------------|-----------|----------------------------------------------|
| term | path | string | The element field you want to aggregate. |
| elasticsearchQuery | body | JSON | A JSON query. |

### Request URL

`https://app.metricly.com/events/{eventId}`

### CURL

In the following CURL example, the **eventId** `82691285-5254-4830-ba07-34b809cfe25b` is used.

```
curl -X GET --header 'Accept: application/json' 'https://app.metricly.com/events/82691285-5254-4830-ba07-34b809cfe25b'

```

### Response Body

The following response body returns key details such as the event **category**, **policyName**, **metricFQN** involved, and more.
```
{
  "event": {
    "id": "82691285-5254-4830-ba07-34b809cfe25b",
    "timestamp": "2020-02-08T02:05:00Z",
    "category": {
      "id": "1",
      "name": "INFO",
      "color": "#0000FF"
    },
    "data": {
      "metricIds": [
        {
          "fqn": "aws.ec2.cpuutilization",
          "id": "1b350b41-e6a6-3a41-8b0a-b9292553fce7"
        }
      ],
      "policyName": "Test-DY-PolicyCreationTime",
      "metrics": [
        "aws.ec2.cpuutilization"
      ],
      "results": "{\"violating\":true,\"conditions\":[{\"id\":\"0\",\"violating\":true,\"expression\":\"The current value of aws.ec2.cpuutilization is 99.53; this is above the static threshold of 99.\"}],\"metrics\":[\"aws.ec2.cpuutilization\"]}"
    },
    "elementId": "24660956-1234-5678-adbe-71c85255bd40",
    "elementFqn": "123459301106:EC2:us-west-2:i-4b0d3a41",
    "elementType": "EC2",
    "elementName": "example-usw2a (10.10.10.6)",
    "elementLocation": "us-west-2a",
    "elementTags": {
      "app": "vpn",
      "n.analysis.status": "",
      "Tenant": "internal",
      "n.collectors": "EC2",
      "n.backfill.status": "false",
      "Netuitive": "True",
      "Name": "example-usw2a"
    },
    "policy": {
      "id": "fe8bd66b-586f-401e-9982-d898aebda30f",
      "name": "Test-DY-PolicyCreationTime",
      "description": null,
      "scope": null,
      "duration": null,
      "anyCondition": false,
      "conditions": [],
      "eventConditions": [],
      "checkCondition": null,
      "actions": [],
      "enabled": true,
      "deleted": false
    },
    "source": null,
    "title": null,
    "tags": [],
    "type": null,
    "isExternal": false,
    "processedTime": null,
    "eventTags": {}
  }
}
```

{{% /expand %}}

---
